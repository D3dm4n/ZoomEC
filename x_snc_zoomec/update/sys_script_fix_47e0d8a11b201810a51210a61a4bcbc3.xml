<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_fix">
    <sys_script_fix action="INSERT_OR_UPDATE">
        <active>true</active>
        <before>false</before>
        <description/>
        <flush_cache>false</flush_cache>
        <name>refine transcript</name>
        <record_for_rollback>false</record_for_rollback>
        <run_once>true</run_once>
        <script><![CDATA[var current = new GlideRecord('kb_knowledge');
current.get('6ab388d9dba0d4106b7eccfa1396197f');

gs.info('rec ' + current.number);
var transcript = current.text + '';
var cleanScript = stripHTML(transcript).toString();
var regex2 = /(.*(?:\r?.\n(?!\r?\n).*)*)(\d{2}:\d{2}:\d{2}[.,]\d{3})\s--\n\s(\d{2}:\d{2}:\d{2}[.,]\d{3})\s\n(.*[:])(.*(?:\r?\n(?!\r?\n).*)*)/gm;

var arr = cleanScript.match(regex2);
gs.info("TRANSCRIPT REFINED: " + cleanScript.replace(regex2, "$5"));


function stripHTML(str) {

	// Regex to get HTML tags and Brackets
	var regex = /(\<[^>]+?\>)|(\&[^;]{2,6}\;)|(\{[^}]+?\})|(\[[^\]]+\])/gm;
	// If the regex comes back as true
	var theMessage = str.toString().replace(regex, '\n');
	return theMessage;
}]]></script>
        <sys_class_name>sys_script_fix</sys_class_name>
        <sys_created_by>matt</sys_created_by>
        <sys_created_on>2020-05-02 20:46:47</sys_created_on>
        <sys_id>47e0d8a11b201810a51210a61a4bcbc3</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>refine transcript</sys_name>
        <sys_package display_value="ZoomEC" source="x_snc_zoomec">8255ef051b689410a51210a61a4bcbff</sys_package>
        <sys_policy/>
        <sys_scope display_value="ZoomEC">8255ef051b689410a51210a61a4bcbff</sys_scope>
        <sys_update_name>sys_script_fix_47e0d8a11b201810a51210a61a4bcbc3</sys_update_name>
        <sys_updated_by>matt</sys_updated_by>
        <sys_updated_on>2020-05-02 20:47:05</sys_updated_on>
        <unloadable>false</unloadable>
    </sys_script_fix>
</record_update>
