<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="pa_scripts">
    <pa_scripts action="INSERT_OR_UPDATE">
        <arguments>text</arguments>
        <description/>
        <name>Sanitizing the transcript text</name>
        <script><![CDATA[var refineTranscript = function (transcript) {
	// gs.info('rec ' + current.number);
	//var transcript = current.text + '';
	var cleanScript = stripHTML(transcript).toString();
	var regex2 = /(.*(?:\r?.\n(?!\r?\n).*)*)(\d{2}:\d{2}:\d{2}[.,]\d{3})\s--\n\s(\d{2}:\d{2}:\d{2}[.,]\d{3})\s\n(.*[:])(.*(?:\r?\n(?!\r?\n).*)*)/gm;

	var arr = cleanScript.match(regex2);

	return cleanScript.replace(regex2, "$5");


	function stripHTML(str) {

		// Regex to get HTML tags and Brackets
		var regex = /(\<[^>]+?\>)|(\&[^;]{2,6}\;)|(\{[^}]+?\})|(\[[^\]]+\])/gm;
		// If the regex comes back as true
		var theMessage = str.toString().replace(regex, '\n');
		return theMessage;
	}

};

refineTranscript(current.text);]]></script>
        <sys_class_name>pa_scripts</sys_class_name>
        <sys_created_by>matt</sys_created_by>
        <sys_created_on>2020-05-02 20:54:26</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>95e114e11b201810a51210a61a4bcb31</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Sanitizing the transcript text</sys_name>
        <sys_overrides/>
        <sys_package display_value="ZoomEC" source="x_snc_zoomec">8255ef051b689410a51210a61a4bcbff</sys_package>
        <sys_policy/>
        <sys_scope display_value="ZoomEC">8255ef051b689410a51210a61a4bcbff</sys_scope>
        <sys_update_name>pa_scripts_95e114e11b201810a51210a61a4bcb31</sys_update_name>
        <sys_updated_by>matt</sys_updated_by>
        <sys_updated_on>2020-05-02 20:54:26</sys_updated_on>
        <table>kb_knowledge</table>
    </pa_scripts>
    <sys_translated_text action="delete_multiple" query="documentkey=95e114e11b201810a51210a61a4bcb31"/>
</record_update>
